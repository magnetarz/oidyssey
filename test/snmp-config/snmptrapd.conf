# SNMP Trap Daemon Configuration for OIDyssey Testing
# This configuration allows the trap receiver to accept and log all incoming traps

# Disable authentication - accept all traps for testing
disableAuthorization yes

# Accept all trap community strings
authCommunity log,execute,net public
authCommunity log,execute,net private
authCommunity log,execute,net testing

# Log all traps to stdout and file
# Format: 
# 0 = date and time
# 1 = trap header  
# 2 = trap PDU (formatted)
outputOption s 2

# Log to stdout for container logs
logOption f

# Also log to file for persistence
logOption o /var/log/snmp/snmptrapd.log

# Set log level to debug for testing
loggingLevel 7

# Forward traps to n8n if needed (uncomment to enable)
# forward default 172.25.0.10:1162

# Trap handler for logging all received traps
traphandle default /usr/bin/logger -t snmptrapd "Trap received"

# Execute custom scripts on trap reception (optional)
# traphandle 1.3.6.1.6.3.1.1.5.* /scripts/handle-standard-trap.sh
# traphandle 1.3.6.1.4.1.* /scripts/handle-enterprise-trap.sh

# Configure AgentX for sub-agent support (if needed)
master agentx
agentXSocket tcp:localhost:705

# Listen on all interfaces
agentaddress udp:162,udp:1162

# Don't exit on connection errors
dontLogTCPWrappersConnects yes

# Create PID file
pidFile /var/run/snmptrapd.pid